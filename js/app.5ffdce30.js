(function(t){function e(e){for(var n,o,s=e[0],l=e[1],c=e[2],d=0,v=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&v.push(r[o][0]),r[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(v.length)v.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,s=1;s<a.length;s++){var l=a[s];0!==r[l]&&(n=!1)}n&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},r={app:0},i=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="https://lufs.froghyar.com/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"23a5":function(t,e,a){"use strict";var n=a("9813"),r=a.n(n);r.a},"359c":function(t,e,a){t.exports=a.p+"img/github.ef7a02b6.png"},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("router-view"),a("Navigation")],1)},i=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-navigation-drawer",{attrs:{"mini-variant":t.mini,permanent:"",fixed:"","disable-resize-watcher":!0,"disable-route-watcher":!0},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",t._l(t.items,(function(e){return a("v-list-item",{key:e.title,attrs:{link:"",ripple:!1}},[a("v-list-item-icon",[a("v-btn",{staticClass:"menu-button",attrs:{icon:"",rounded:"",color:"primary",id:"no-background-hover",to:e.to}},[a("v-icon",{attrs:{large:""}},[t._v(t._s(e.icon))])],1)],1)],1)})),1)],1)},s=[],l={data:function(){return{drawer:!0,items:[{title:"Home",icon:"fiber_manual_record",to:"/"},{title:"About",icon:"stop",to:"/about"}],mini:!0}}},c=l,u=(a("23a5"),a("2877")),d=a("6544"),v=a.n(d),f=a("8336"),m=a("132d"),p=a("8860"),h=a("da13"),g=a("34c3"),w=a("f774"),y=Object(u["a"])(c,o,s,!1,null,"1462725e",null),x=y.exports;v()(y,{VBtn:f["a"],VIcon:m["a"],VList:p["a"],VListItem:h["a"],VListItemIcon:g["a"],VNavigationDrawer:w["a"]});var b={name:"App",components:{Navigation:x}},C=b,_=a("7496"),S=Object(u["a"])(C,r,i,!1,null,null,null),F=S.exports;v()(S,{VApp:_["a"]});var A=a("f309");n["a"].use(A["a"]);var T,L=new A["a"]({theme:{themes:{light:{primary:"#616161",secondary:"#eeeeee",accent:"#8c9eff",error:"#b71c1c"}}},icons:{iconfont:"md"}}),V=a("8c4f"),R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"main-container",attrs:{fluid:""}},[a("v-flex",{attrs:{lg12:"",md12:"",sm8:"",xs6:""}},[a("v-col",{attrs:{cols:"12",md:12}},[a("v-row",{staticClass:"title-text"},[a("h1",{staticClass:"display-4"},[t._v("Real Time LUFS Loudness Meter")])]),a("v-row",[a("h1",{staticClass:"subtitle-text title"},[t._v(" Based on the "),a("a",{attrs:{color:"black",href:"https://www.itu.int/dms_pubrec/itu-r/rec/bs/R-REC-BS.1770-4-201510-I!!PDF-E.pdf"}},[t._v("BS.1770-4")]),t._v(" recommendation from the International Telecommunication Union. ")])]),a("v-flex",{attrs:{lg12:"",md12:"",sm6:"",xs12:""}},[a("v-row",{staticClass:"upload-area"},[a("v-flex",{staticClass:"decrease-flex",attrs:{"md-6":""}},[a("v-container",[a("v-row",{attrs:{"align-start":""}},[a("v-btn",{attrs:{tag:"label"}},[a("input",{staticClass:"upload-audio",attrs:{type:"file",accept:"audio/mp3, audio/wav"},on:{change:function(e){return t.uploadAudio(e.target.files[0])}}}),t._v(" Upload Audio "),a("span",[t._v("*")])])],1)],1)],1),a("v-flex",{staticClass:"audio-player-container",attrs:{"md-6":""}},[a("v-row",{attrs:{"justify-start":""}},[a("audio",{ref:"audioPlayer",staticClass:"audio-player",attrs:{id:"audioPlayer",controls:""}},[a("source",{attrs:{src:t.audioURL}})])])],1)],1)],1),a("v-row",[a("h1",{staticClass:"asterisk-text body-2"},[a("span",[t._v("*")]),t._v(": the file will never leave your computer ")])]),a("v-row",{staticClass:"mt-1"})],1)],1),a("v-divider",{staticClass:"divider"}),a("v-row",[a("v-container",{attrs:{fluid:""}},[a("Analyser",{attrs:{sourceNode:t.sourceNode,audioURL:t.audioURL}})],1)],1)],1)},M=[],k=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-btn",{on:{click:t.toggleAnalysis}},[t.runAnalysis?a("span",[t._v("Stop Analysis")]):a("span",[t._v("Start Analysis")])])],1),a("v-container",{attrs:{fluid:""}},[a("v-flex",{attrs:{lg12:"",md12:"",sm3:"",xs3:""}},[a("v-row",{staticClass:"pt-1"},[a("v-flex",{attrs:{"md-4":""}},[a("v-row",{attrs:{"align-start":""}},[a("v-container",[a("v-row",[a("div",{staticClass:"rms-meter-container"},[t._v(" RMS "),a("span",{staticClass:"meter-text",attrs:{id:"RMS-level-text"}},[t._v("—")]),t._v(" dBFS ")])]),a("v-row",{staticClass:"pt-2"},[a("meter",{staticClass:"rms-meter",attrs:{id:"RMS-level",min:"-100",max:"10",value:"-100"}})])],1)],1)],1),a("v-flex",{attrs:{"md-4":""}},[a("v-row",{attrs:{"align-start":""}},[a("v-container",[a("v-row",[a("div",{staticClass:"lufsshort-meter-container"},[t._v(" Loudness "),a("span",{staticClass:"meter-text",attrs:{id:"LUFSShort-level-text"}},[t._v("—")]),t._v(" LUFS ")])]),a("v-row",{staticClass:"pt-2"},[a("meter",{staticClass:"rms-meter",attrs:{id:"LUFSShort-level",min:"-100",max:"10",value:"-100"}})])],1)],1)],1),a("v-flex",{attrs:{"md-4":""}},[a("v-row",{attrs:{"align-start":""}},[a("v-container",[a("v-row",[a("div",{staticClass:"lufsintegrated-meter-container"},[t._v(" Integrated "),a("span",{staticClass:"meter-text",attrs:{id:"LUFSIntegrated-level-text"}},[t._v("—")]),t._v(" LUFS ")])]),a("v-row",{staticClass:"pt-2"},[a("meter",{staticClass:"rms-meter",attrs:{id:"LUFSIntegrated-level",min:"-100",max:"10",value:"-100"}})])],1)],1)],1)],1)],1)],1),a("v-row",{attrs:{"align-start":""}},[a("div",{staticClass:"hidden-sm-and-down FFT-container"},[a("canvas",{staticClass:"FFT-canvas",attrs:{id:"FFT"}})])])],1)}),I=[],U=(a("4160"),a("a630"),a("6b93"),a("b680"),a("159b"),a("8cc4")),j=a.n(U),O=a("7fc5"),N=a.n(O),E=2048,B=0,P={props:["audioURL","sourceNode"],data:function(){return{runAnalysis:!1,initiated:!1,audioCTX:null}},methods:{toggleAnalysis:function(){this.runAnalysis?this.stopAnalysis():this.startAnalysis()},initContext:function(){this.audioCTX=j.a.context._context},stopAnalysis:function(){this.runAnalysis=!1,B=0},startAnalysis:function(){var t=this;if(this.runAnalysis=!0,this.audioURL){this.initiated||this.initContext();var e=document.getElementById("FFT");e.width=1620,e.height=500,e.style.width="810px",e.style.height="250px";var a=[],n=e.getContext("2d"),r=n.canvas.height,i=n.canvas.width,o=[30,50,100,200,1e3,2e3,4e3,1e4],s=50,l=4;n.font="30px Avenir",n.fillStyle="black",n.textAlign="center",n.strokeStyle="black";for(var c=Array.from({length:E},(function(t,e){return e})),u=0;u<E;u++)a.push(X(E,i,c[u],null));for(var d=0;d<o.length;d++)n.fillText(String(o[d]),X(E,i,null,o[d]),r);var v=new j.a.Waveform(E),f=new j.a.Waveform(E),m=[1.53512485958697,-2.69169618940638,1.19839281085285],p=[1,-1.69065929318241,.73248077421585],h=this.audioCTX.createIIRFilter(m,p),g=[1,-2,1],w=[1,-1.99004745483398,.99007225036621],y=this.audioCTX.createIIRFilter(g,w),x=new j.a.FFT(E);j.a.connect(this.sourceNode,x),j.a.connect(x,v),j.a.connect(v,h),j.a.connect(h,y),j.a.connect(y,f);var b=new N.a,C=function e(){if(t.runAnalysis){requestAnimationFrame(e),n.clearRect(0,0,i,r-s);var o=x.getValue();o.forEach((function(t,e){n.beginPath(),n.moveTo(a[e],r-s),n.lineTo(a[e],Math.min(0-l*t,r-s)),n.stroke()}));for(var c=v.getValue(),u=0,d=0;d<c.length;d++)u+=Math.pow(c[d],2);var m=3.01,p=20*Math.log10(Math.sqrt(u/c.length))+m;$("RMS",p,B);var h=f.getValue();0===B&&b.postMessage({messageType:"init",FFT_SIZE:E,counter:B,FS:t.audioCTX.sampleRate}),0!==B&&b.postMessage({messageType:"fillBuffer",filteredSignal:h,counter:B}),b.onmessage=function(t){if("integratedCalculated"===t.data.returnMessageType){var e=t.data.integratedLoudness;$("LUFSIntegrated",e)}if("shortTermCalculated"===t.data.returnMessageType){var a=t.data.shortTermLoudness;$("LUFSShort",a,B)}},B++}};C()}else alert("You need to upload an audio file first!")}}};function X(t,e,a,n){var r=Math.log10(20),i=Math.log10(22050);n||(n=22050*a/t);var o=e/(i-r);return Math.round(o*(Math.log10(n)-r))}function $(t,e,a){var n=document.getElementById(t+"-level");a?(a%50===0&&(T=document.getElementById(t+"-level-text"),T.textContent=e.toFixed(2)),n.value=isFinite(e)?e:n.min):(T=document.getElementById(t+"-level-text"),T.textContent=e.toFixed(2),n.value=isFinite(e)?e:n.min)}var D=P,H=a("a523"),W=a("0e8f"),q=a("0fd9"),J=Object(u["a"])(D,k,I,!1,null,null,null),z=J.exports;v()(J,{VBtn:f["a"],VContainer:H["a"],VFlex:W["a"],VRow:q["a"]});var Y={name:"Home",components:{Analyser:z},data:function(){return{audioURL:null,sourceNode:null,audioCTX:null}},mounted:function(){var t=window.AudioContext||window.webkitAudioContext;this.audioCTX=new t,j.a.setContext(this.audioCTX)},methods:{uploadAudio:function(t){this.audioURL=URL.createObjectURL(t),this.$refs.audioPlayer.load(),this.sourceNode?this.connectSourceNode():(this.audioCTX.resume().then((function(){console.log("Audio Context Initialised!")})),this.createSourceNode())},createSourceNode:function(){var t=document.getElementById("audioPlayer");this.sourceNode=this.audioCTX.createMediaElementSource(t),this.connectSourceNode()},connectSourceNode:function(){this.sourceNode.connect(this.audioCTX.destination)}}},Z=Y,G=a("62ad"),K=a("ce7e"),Q=Object(u["a"])(Z,R,M,!1,null,null,null),tt=Q.exports;v()(Q,{VBtn:f["a"],VCol:G["a"],VContainer:H["a"],VDivider:K["a"],VFlex:W["a"],VRow:q["a"]});var et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"main-container",attrs:{fluid:""}},[n("v-col",{attrs:{cols:"12",md:12}},[n("v-row",{staticClass:"title-text"},[n("h1",{staticClass:"display-4"},[t._v("About")])])],1),n("v-divider",{staticClass:"mt-4 divider"}),n("v-container",[n("v-row",[n("v-flex",{attrs:{"md-6":""}},[n("v-container",[n("v-row",[n("a",{attrs:{href:"https://github.com/a-froghyar/frghr-lufs",target:"_blank"}},[n("img",{staticClass:"logo",attrs:{src:a("359c")}})])])],1)],1),n("v-flex",{attrs:{"md-6":""}},[n("v-container",[n("v-row",[n("a",{attrs:{href:"https://www.linkedin.com/in/adam-froghyar/",target:"_blank"}},[n("img",{staticClass:"logo",attrs:{src:a("dd32")}})])])],1)],1)],1)],1)],1)},at=[],nt={name:"About"},rt=nt,it=Object(u["a"])(rt,et,at,!1,null,null,null),ot=it.exports;v()(it,{VCol:G["a"],VContainer:H["a"],VDivider:K["a"],VFlex:W["a"],VRow:q["a"]}),n["a"].use(V["a"]);var st=new V["a"]({routes:[{path:"/",name:"Home",component:tt},{path:"/about",name:"About",component:ot}]});a("d1e78"),a("845f");n["a"].config.productionTip=!1,new n["a"]({vuetify:L,router:st,render:function(t){return t(F)}}).$mount("#app")},"7fc5":function(t,e,a){t.exports=function(){return new Worker(a.p+"e9cdf34545a3e7af84ee.worker.js")}},"845f":function(t,e,a){},9813:function(t,e,a){},dd32:function(t,e,a){t.exports=a.p+"img/linkedin.7cce64ab.png"}});
//# sourceMappingURL=app.5ffdce30.js.map